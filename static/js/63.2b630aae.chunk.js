"use strict";(self.webpackChunkkaranbala=self.webpackChunkkaranbala||[]).push([[63],{3705:function(e,n,t){t.r(n),t.d(n,{default:function(){return tn}});var r=t(7313),i=t(8467),a=t(9506),o=t(1113),s=t(7131),u=t(8070),c=t(3433),l=t(9439),d=t(9099),p=t(2135),f=t(6417),m=function(e){var n=(0,r.useState)([{key:"",value:!1}]),t=(0,l.Z)(n,2),i=t[0],a=t[1],o=e.item,s=e.depthLevel,u=(0,r.useRef)();return(0,f.jsx)("li",{className:"menu-items",ref:u,children:o.category?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("span",{className:"categoryTitle",children:o.category.title}),o.category.children.map((function(e,n){var t;return(0,f.jsx)(r.Fragment,{children:e.submenu?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)("button",{type:"button","aria-haspopup":"menu",onClick:function(){a((function(n){var t;return[].concat((0,c.Z)(n),[{key:e.title,value:!(null!==(t=n[n.map((function(e){return e.key})).lastIndexOf(e.title)])&&void 0!==t&&t.value)}])}))},style:{display:"flex",justifyContent:"space-between"},children:[e.title," ",s>0?(0,f.jsx)("span",{children:"\xbb"}):(0,f.jsxs)(f.Fragment,{children:[" ",null!==(t=i[i.map((function(e){return e.key})).lastIndexOf(e.title)])&&void 0!==t&&t.value?(0,f.jsx)("span",{className:"arrow"}):(0,f.jsx)("span",{className:"arrow-left"})]})]}),(0,f.jsx)(h,{depthLevel:s,submenus:e.submenu,subtitle:i,index:e.title})]}):(0,f.jsx)(d.Z,{disableRipple:!0,component:p.OL,to:e.to,startIcon:e.startIcon,children:e.title})},n)}))]}):(0,f.jsx)(f.Fragment,{children:(0,f.jsx)(d.Z,{disableRipple:!0,component:p.OL,to:o.to,startIcon:o.startIcon,children:o.title})})})},h=function(e){var n,t=e.submenus,r=e.depthLevel,i=e.index,a=e.subtitle,o=a.map((function(e){return e.key})).lastIndexOf(i),s=(r+=1)>1?"dropdown-submenu":"";return(0,f.jsx)("ul",{"data-id":i,className:"dropdown ".concat(s," ").concat(null!==(n=a[o])&&void 0!==n&&n.value?"show":""),children:t.map((function(e,n){return(0,f.jsx)(m,{item:e,depthLevel:r},n)}))})},x=(0,t(7894).Z)(a.Z)((function(){return"\n  :root{\n    font-family:IRANSans !important;\n    }\n  \n  .menus {\n    display: flex;\n    list-style: none;\n    direction: ltr;\n    flex-direction: column;\n    \n  }\n  .menu-items {\n    position: relative;\n    text-align: left;\n    \n  }\n  \n  .menu-items a,\n  .menu-items button {\n    margin: 0 ;\n    padding:0 10px 0  0;\n    line-height: 2;\n    font-family:IRANSans !important;\n\n  }\n  \n  .menu-items a {\n    display: block;\n    color: inherit;\n    text-decoration: none;\n  }\n  \n  .menu-items button {\n    color: inherit;\n    font-size: inherit;\n    border: none;\n    background-color: transparent;\n    cursor: pointer;\n    width: 100%;\n  }\n \n  .arrow::after {\n    content: '';\n    display: inline-block;\n    margin-left: 0.28em;\n    vertical-align: 0.09em;\n    border-top: 0.42em solid;\n    border-right: 0.32em solid transparent;\n    border-left: 0.32em solid transparent;\n  }\n\n  .arrow-left::after {\n    content: '';\n    display: inline-block;\n    margin-left: 0.28em;\n    vertical-align: 0.09em;\n    border-bottom: 0.32em solid transparent;\n    border-right: 0.32em solid  transparent;\n    border-left: 0.42em solid ;\n    border-top: 0.32em solid transparent;\n  }\n\n  .categoryTitle{\n    color: #707e8d\n  }\n  \n  .dropdown {\n\n    box-shadow: 0 10px 15px -3px rgba(46, 41, 51, 0.08),\n    0 4px 6px -2px rgba(71, 63, 79, 0.16);\n    z-index: 9999;\n    min-width: 100px;\n    padding: 0.5rem 0;\n    border-radius: 0.5rem;\n    list-style-type: disc; \n    display: none;\n  }\n  \n  .dropdown.show {\n    display: block;\n    padding: 0 28px;\n  }\n  \n  .dropdown .dropdown-submenu {\n    position: absolute;\n    left: 10px;\n    top: 15px\n  }\n  span{ display: inline}\n  span .MuiSvgIcon-root{font-size:15px}\n  "})),g=function(e){var n=e.children;return(0,f.jsx)(x,{children:(0,f.jsx)("ul",{className:"menus",children:n})})},v=function(e){var n=e.items;return(0,f.jsx)(g,{children:n.map((function(e,n){return(0,f.jsx)(m,{item:e,depthLevel:0,children:" "},n)}))})},Z=t(7887),j=t(1765),b=[{title:"\u062e\u0627\u0646\u0647",to:"/",startIcon:(0,f.jsx)(Z.Z,{})},{title:"\u062f\u0627\u0634\u0628\u0648\u0631\u062f",to:"/pv/karanbala/admin",startIcon:(0,f.jsx)(j.Z,{})},{category:{children:[{title:"\u0645\u062f\u06cc\u0631\u06cc\u062a \u0645\u062d\u062a\u0648\u0627",submenu:[{title:"\u0631\u0634\u062a\u0647 \u062a\u062d\u0635\u06cc\u0644\u06cc",to:"/pv/karanbala/admin/field-of-study"},{title:"\u067e\u0627\u06cc\u0647 \u062a\u062d\u0635\u06cc\u0644\u06cc",to:"/pv/karanbala/admin/grade-level"},{title:"\u06a9\u062a\u0627\u0628",to:"/pv/karanbala/admin/book"},{title:"\u062a\u0631\u0645 \u062a\u062d\u0635\u06cc\u0644\u06cc",to:"/pv/karanbala/admin/term-of-study"},{title:"\u0641\u0635\u0644",to:"/pv/karanbala/admin/chapter"},{title:"\u0645\u0648\u0636\u0648\u0639",to:"/pv/karanbala/admin/subject"}]}]}}],y=t(2702),w=t(9273),C=t(874),k=function(e){var n,t=e.route,r=e.userRole,a=e.children,o=null===r||void 0===r||null===(n=r.roles)||void 0===n?void 0:n.some((function(e){var n;return t.requiredRoles.includes(e.title)&&(null===(n=e.permissions)||void 0===n?void 0:n.some((function(e){return e.resource===t.resource&&e.action===t.action})))}));return o||void 0===o?(0,f.jsx)(f.Fragment,{children:a}):(localStorage.removeItem("token"),C.h.dispatch({type:w.Q.SetUserToken,payload:null}),(0,f.jsx)(i.Fg,{to:"/"}))},S=t(5554),A=t(1413),R=t(4165),U=t(5861),N=t(6783),T=t(5281),F=t(5627),O=t(56),I=t(173),L=function(){return(0,O.useMutation)((function(e){return I.T.fieldOfStudyControllerCreate((0,A.Z)({},e))}))},E=t(2036),P=function(){return(0,O.useQuery)(["Get-All-Field-Of-Studies"],(0,U.Z)((0,R.Z)().mark((function e(){return(0,R.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.T.fieldOfStudyControllerFindAll();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),{refetchOnWindowFocus:!1})},_=t(4942),W=t(5987),M=t(7551),q=t(1629),B=t(6835),H=t(3477),z=t(4076),D=t(7478),K=t(4758),G=t(3467),Q=t(5033),J=t(5743),$=t(4146),V=t(7970),X=t(38),Y=["rowsPerPage","onRowsPerPageChange","total"],ee=(0,u.Z)((function(e){return(0,X.Z)({root:{width:"100%",display:"flex",justifyContent:"center","& > *":{marginTop:e.spacing(2)},"& .MuiPaginationItem-page":{backgroundColor:e.palette.background.paper},"& .MuiPagination-ul":{justifyContent:"flex-start"},"& .Mui-selected":{backgroundColor:"".concat(e.palette.primary.main," !important"),color:e.palette.background.paper,boxShadow:"0 14px 26px -12px rgb(103 28 201 / 42%), 0 4px 23px 0px rgb(0 0 0 / 12%), 0 8px 10px -5px rgb(103 28 201 / 20%)"}}})})),ne=function(e){e.rowsPerPage,e.onRowsPerPageChange,e.total;var n=(0,W.Z)(e,Y),t=ee();return(0,f.jsx)("div",{className:t.root,children:(0,f.jsx)(V.Z,(0,A.Z)({defaultPage:1,color:"primary",variant:"outlined"},n))})},te=t(7291),re=["headers","loading","children","rows","onSelect","expandHeader","menuHeader","pagination","onExpand","emptyNode","emptyRows","newItems","successItems","errorItems","edit","secondary","successHeader","errorHeader","hasStyle"],ie=(0,u.Z)((function(e){return{skeleton:{borderRadius:0},loadingTD:{border:"none",paddingBottom:"0",paddingRight:"0",paddingLeft:"0",paddingTop:"0"},moreIcon:{},successRow:{backgroundColor:"".concat((0,M.Fq)(e.palette.success.dark,.13)," !important")},errorRow:{backgroundColor:"".concat((0,M.Fq)(e.palette.error.dark,.1)," !important")},secondary:{"& .MuiTableCell-head":{backgroundColor:"transparent"},"& .MuiTableBody-root":{"& tr:nth-of-type(even)":{backgroundColor:"transparent"},"& tr:nth-of-type(odd)":{backgroundColor:"transparent"}}},successHeader:{"&.MuiTableCell-head":{color:e.palette.success.main}},errorHeader:{"&.MuiTableCell-head":{color:e.palette.error.dark}},"$MuiTableCell-body":{padding:"1.6rem"},sumColumns:{"& .MuiTableCell-body":{backgroundColor:"#2e2e33",paddingTop:"20px !important",paddingBottom:"20px !important"}}}})),ae=function(e){var n=e.headers,t=e.loading,i=(e.children,e.rows),a=e.onSelect,o=e.expandHeader,u=e.menuHeader,c=e.pagination,d=e.onExpand,p=e.emptyNode,m=(e.emptyRows,e.newItems,e.successItems,e.errorItems,e.edit,e.secondary),h=e.successHeader,x=e.errorHeader,g=(e.hasStyle,(0,W.Z)(e,re)),v=ie({secondary:m,successHeader:h,errorHeader:x}),Z=r.useState([]),j=(0,l.Z)(Z,2),b=j[0],y=j[1],w=r.useState({}),C=(0,l.Z)(w,2),k=C[0],S=C[1],R=n.length;o&&(R+=1),u&&(R+=1),a&&(R+=1),r.useMemo((function(){c&&S({})}),[null===c||void 0===c?void 0:c.page,null===c||void 0===c?void 0:c.rowsPerPage]);return(0,f.jsxs)(q.Z,{children:[(0,f.jsxs)(B.Z,(0,A.Z)((0,A.Z)({className:(0,$.Z)(v.table,(0,_.Z)({},v.secondary,m)),"aria-label":"table"},g),{},{children:[(0,f.jsx)(H.Z,{children:(0,f.jsxs)(z.Z,{children:[a&&(0,f.jsx)(D.Z,{padding:"checkbox",children:(0,f.jsx)(K.Z,{indeterminate:b.length>0&&b.length<i.length,checked:i.length>0&&b.length===i.length,onChange:function(e){if(e.target.checked){var n=i.reduce((function(e,n){var t=n.id;return t&&e.push(t),e}),[]);return a&&a(n),void y(n)}y([])},inputProps:{"aria-label":"select all desserts"}})}),o&&(0,f.jsx)(D.Z,{width:150,component:"th",children:o}),n.map((function(e,n){var t;return(0,f.jsx)(D.Z,(0,A.Z)((0,A.Z)({},e),{},{component:"th",className:(0,$.Z)((t={},(0,_.Z)(t,v.successHeader,h),(0,_.Z)(t,v.errorHeader,x),t))}),n)})),u&&(0,f.jsx)(D.Z,{width:150,component:"th",children:u})]})}),t?(0,f.jsx)(f.Fragment,{children:"Loading..."}):(0,f.jsx)(f.Fragment,{children:(0,f.jsxs)(G.Z,{children:[(null===i||void 0===i?void 0:i.length)>0?null===i||void 0===i?void 0:i.map((function(e,n){var t,i=e.data,o=e.expandNode,u=e.expandNodeContent,c=e.id,l=e.onPressTitle,p=e.clickOnIndexId,m=void 0===p?0:p,h=!!c&&(t=c,-1!==b.indexOf(t));return(0,f.jsxs)(r.Fragment,{children:[(0,f.jsxs)(z.Z,{hover:!0,role:"checkbox","aria-checked":h,tabIndex:-1,selected:h,children:[a&&(0,f.jsx)(D.Z,{onClick:function(e){return function(e,n){var t=b.indexOf(n),r=[];-1===t?r=r.concat(b,n):0===t?r=r.concat(b.slice(1)):t===b.length-1?r=r.concat(b.slice(0,-1)):t>0&&(r=r.concat(b.slice(0,t),b.slice(t+1))),a&&a(r),y(r)}(0,c)},padding:"checkbox",children:(0,f.jsx)(K.Z,{checked:h,inputProps:{"aria-labelledby":String(c)}})}),o&&(0,f.jsx)(D.Z,{children:(0,f.jsxs)(J.Z,{display:"inline-block",onClick:function(){S((function(e){return(0,A.Z)((0,A.Z)({},e),{},(0,_.Z)({},n,!e[n]))})),d&&d(c)},children:[u,(0,f.jsx)(s.Z,{"aria-label":"expand row",size:"small",onClick:function(){S((function(e){return(0,A.Z)((0,A.Z)({},e),{},(0,_.Z)({},n,!e[n]))})),d&&d(c)},children:k[n]?(0,f.jsx)(te.UF1,{}):(0,f.jsx)(te.nOJ,{})})]})}),Object.values(i).map((function(e,n){return(0,f.jsx)(D.Z,{onClick:function(){void 0!==l&&n===m&&l()},children:e},n)}))]},n),o&&(0,f.jsx)(z.Z,{children:(0,f.jsx)(D.Z,{style:{paddingBottom:0,paddingTop:0},colSpan:R,children:(0,f.jsx)(Q.Z,{in:k[n],timeout:"auto",unmountOnExit:!0,children:(0,f.jsx)(J.Z,{children:o})})})})]},n)})):(0,f.jsx)(z.Z,{children:(0,f.jsx)(D.Z,{align:"center",colSpan:R,children:p})}),e.children&&(0,f.jsx)(z.Z,{className:v.sumColumns,children:e.children})]})})]})),!t&&c&&(0,f.jsx)(ne,(0,A.Z)({},c))]})},oe=ae;ae.defaultProps={emptyNode:"No Data"};var se=t(9213),ue=function(){return(0,O.useMutation)((function(e){return I.T.fieldOfStudyControllerRemove(e)}))},ce=function(){return(0,O.useMutation)((function(e){return I.T.fieldOfStudyControllerUpdate(e.id,(0,A.Z)({},e))}))},le=(0,u.Z)((function(e){return{container:{display:"flex",gap:"10px",justifyContent:"space-around"},fieldOfStudy:{margin:"0 50px"},formContainer:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"2rem",margin:"1rem",border:"1px solid ".concat(e.palette.primary.main),borderRadius:"5px",boxShadow:"0px 1px 2px ".concat(e.palette.primary.main)},formTitle:{marginBottom:"2rem",fontSize:"2rem",fontWeight:"bold",color:e.palette.primary.main},formField:{margin:"2rem 0",width:"100%"},formButton:{margin:"1rem",width:"100%"}}})),de=function(e){var n,t=le(),i=(0,r.useState)(!1),u=(0,l.Z)(i,2),c=u[0],p=u[1],m=(0,r.useState)(1),h=(0,l.Z)(m,2),x=h[0],g=h[1],v=(0,r.useState)(10),Z=(0,l.Z)(v,1)[0],j=(0,r.useState)({doUpdate:!1,data:"",id:null}),b=(0,l.Z)(j,2),y=b[0],w=b[1],C=(0,r.useRef)(null),k=L(),S=ce(),O=P(),I=ue(),_=(0,F.cI)(),W=_.handleSubmit,M=_.register,q=_.clearErrors,B=_.formState.errors,H=function(){var e=(0,U.Z)((0,R.Z)().mark((function e(n){return(0,R.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:p(!0),k.mutate(n,{onSuccess:function(){var e=(0,U.Z)((0,R.Z)().mark((function e(n){return(0,R.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:200==n.statusCode?(p(!1),O.refetch(),E.Am.success(n.message)):(p(!1),Array.isArray(n.message)?E.Am.error((0,f.jsx)("ul",{children:n.message.map((function(e){return(0,f.jsx)("li",{children:e},e)}))})):E.Am.error((0,f.jsx)("ul",{children:(0,f.jsx)("li",{children:n.message},n.message)})));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),onError:function(){var e=(0,U.Z)((0,R.Z)().mark((function e(n){return(0,R.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:E.Am.error(n.message);case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()});case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),z=function(){var e=(0,U.Z)((0,R.Z)().mark((function e(n){return(0,R.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:p(!0),S.mutate((0,A.Z)({id:y.id},n),{onSuccess:function(){var e=(0,U.Z)((0,R.Z)().mark((function e(n){return(0,R.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:200==n.statusCode?(p(!1),O.refetch(),E.Am.success(n.message),w({doUpdate:!1,data:"",id:null})):(p(!1),Array.isArray(n.message)?E.Am.error((0,f.jsx)("ul",{children:n.message.map((function(e){return(0,f.jsx)("li",{children:e},e)}))})):E.Am.error((0,f.jsx)("ul",{children:(0,f.jsx)("li",{children:n.message},n.message)})));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),onError:function(){var e=(0,U.Z)((0,R.Z)().mark((function e(n){return(0,R.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:E.Am.error(n.message);case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()});case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,r.useEffect)((function(){window.scrollTo({top:0,left:0,behavior:"smooth"})}),[]),(0,r.useEffect)((function(){var e,n;E.Am.error(null===(e=B.title)||void 0===e||null===(n=e.message)||void 0===n?void 0:n.toString()),q()}),[null===(n=B.title)||void 0===n?void 0:n.message]),(0,f.jsxs)(a.Z,{className:t.container,children:[(0,f.jsx)(a.Z,{children:(0,f.jsxs)("form",{onSubmit:y.doUpdate?W(z):W(H),children:[(0,f.jsx)(N.Z,(0,A.Z)((0,A.Z)({label:"\u0639\u0646\u0648\u0627\u0646 \u0631\u0634\u062a\u0647 \u062a\u062d\u0635\u06cc\u0644\u06cc",variant:"outlined",className:t.formField,value:y.data},M("title",{required:"\u0644\u0637\u0641\u0627 \u0646\u0627\u0645 \u0631\u0634\u062a\u0647 \u062a\u062d\u0635\u06cc\u0644\u06cc \u0631\u0627 \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f"})),{},{inputRef:C,onChange:function(e){y.doUpdate?w({doUpdate:!0,data:e.target.value,id:y.id}):w({doUpdate:!1,data:e.target.value,id:null})}})),(0,f.jsx)(d.Z,{variant:"contained",color:"primary",className:t.formButton,disabled:c,type:"submit",children:c?(0,f.jsx)(T.Z,{size:24}):y.doUpdate?"\u0648\u06cc\u0631\u0627\u06cc\u0634":"\u0630\u062e\u06cc\u0631\u0647"})]})}),(0,f.jsxs)(a.Z,{className:t.fieldOfStudy,children:[(0,f.jsx)(o.Z,{children:"\u0644\u06cc\u0633\u062a \u0631\u0634\u062a\u0647 \u0647\u0627\u06cc \u062a\u062d\u0635\u06cc\u0644\u06cc"}),!O.isLoading&&(null===O||void 0===O?void 0:O.data.length)>0?(0,f.jsx)(oe,{secondary:!0,headers:[{children:"\u0639\u0646\u0648\u0627\u0646"},{children:"\u0639\u0645\u0644\u06cc\u0627\u062a"}],rows:null===O||void 0===O?void 0:O.data.map((function(e,n){return{id:e._id,data:{title:null===e||void 0===e?void 0:e.title,action:(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(s.Z,{onClick:function(){w({doUpdate:!0,data:e.title,id:e._id}),C.current.focus()},children:(0,f.jsx)(te._3A,{width:12,height:12})}),(0,f.jsx)(s.Z,{children:(0,f.jsx)(se.q,{description:"\u0622\u06cc\u0627 \u0627\u0632 \u062d\u0630\u0641 \u0631\u0634\u062a\u0647 \u062a\u062d\u0635\u06cc\u0644\u06cc \u0645\u0637\u0645\u0626\u0646  \u0647\u0633\u062a\u06cc\u062f\u061f",onConfirm:function(){return n=e._id,void I.mutate(n,{onSuccess:function(){var e=(0,U.Z)((0,R.Z)().mark((function e(n){return(0,R.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:200==n.statusCode?(p(!1),O.refetch(),E.Am.success(n.message)):(p(!1),E.Am.error(n.message));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()});var n},approved:"\u0628\u0644\u0647",denied:"\u062e\u06cc\u0631",children:(0,f.jsx)(te.TKD,{width:16,height:16})})})]})}}})),pagination:{page:x,count:1,rowsPerPage:Z,onChange:function(e,n){g(n)},onRowsPerPageChange:function(){}}}):(0,f.jsx)("div",{children:"\u062f\u0631 \u062d\u0627\u0644 \u0628\u0627\u0631\u06af\u06cc\u0631\u06cc..."})]})]})},pe=(0,u.Z)((function(e){return{container:{margin:"32px 52px"}}})),fe=function(){var e=pe();return(0,r.useEffect)((function(){window.scrollTo({top:0,left:0,behavior:"smooth"})}),[]),(0,f.jsx)(a.Z,{className:e.container,children:"\u062f\u0627\u0634\u0628\u0648\u0631\u062f"})},me=t(1550),he=t(3306),xe=t(3277),ge=t(7903),ve=function(){return(0,O.useMutation)((function(e){return I.T.bookControllerCreate((0,A.Z)({},e))}))},Ze=function(){return(0,O.useMutation)((function(e){return I.T.bookControllerUpdate(e.id,(0,A.Z)((0,A.Z)({},e),{},{image:e.image[0]}))}))},je=function(){return(0,O.useQuery)(["Get-All-Books"],(0,U.Z)((0,R.Z)().mark((function e(){return(0,R.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.T.bookControllerFindAll();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),{refetchOnWindowFocus:!1})},be=function(){return(0,O.useMutation)((function(e){return I.T.bookControllerRemove(e)}))},ye=function(){return(0,O.useQuery)(["Get-All-Grade-Levels"],(0,U.Z)((0,R.Z)().mark((function e(){return(0,R.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.T.gradeLevelControllerFindAll();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),{refetchOnWindowFocus:!1})},we=t.p+"static/media/user.68f03813418404ef4cd3.jpg",Ce=t(3960),ke=["ref","onChange"],Se=(0,u.Z)((function(e){return{container:{display:"flex",gap:"10px",justifyContent:"space-around"},fieldOfStudy:{margin:"0 50px"},formContainer:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"2rem",margin:"1rem",border:"1px solid ".concat(e.palette.primary.main),borderRadius:"5px",boxShadow:"0px 1px 2px ".concat(e.palette.primary.main)},formTitle:{marginBottom:"2rem",fontSize:"2rem",fontWeight:"bold",color:e.palette.primary.main},formField:{margin:"1rem",width:"100%"},formButton:{margin:"1rem",width:"100%"}}})),Ae=function(e){var n=Se();(0,r.useEffect)((function(){window.scrollTo({top:0,left:0,behavior:"smooth"})}),[]);var t=(0,r.useState)(!1),i=(0,l.Z)(t,2),u=i[0],c=i[1],p=ve(),m=Ze(),h=(0,r.useRef)(),x=je(),g=be(),v=(0,r.useState)(1),Z=(0,l.Z)(v,2),j=Z[0],b=Z[1],y=(0,r.useState)(10),w=(0,l.Z)(y,1)[0],C=(0,r.useState)({doUpdate:!1,data:"",id:null}),k=(0,l.Z)(C,2),S=k[0],O=k[1],I=(0,r.useState)(),L=(0,l.Z)(I,2),P=L[0],_=L[1],M=(0,r.useState)(),q=(0,l.Z)(M,2),B=q[0],H=q[1],z=r.useState([]),D=(0,l.Z)(z,2),K=D[0],G=D[1],Q=ye(),J=(0,r.useRef)();(0,r.useEffect)((function(){if(B){var e=URL.createObjectURL(B);return _(e),function(){return URL.revokeObjectURL(e)}}_(void 0)}),[B]);var $=(0,r.useRef)(null),V=(0,r.useState)({doUpdate:!1,data:"",id:null}),X=(0,l.Z)(V,2),Y=X[0],ee=X[1],ne=(0,F.cI)(),re=ne.handleSubmit,ie=ne.register,ae=(ne.formState.errors,ie("image")),ue=ae.ref,ce=ae.onChange,le=(0,W.Z)(ae,ke),de=function(){var e=(0,U.Z)((0,R.Z)().mark((function e(n){return(0,R.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c(!0),p.mutate((0,A.Z)((0,A.Z)({},n),{},{image:n.image[0]}),{onSuccess:function(){var e=(0,U.Z)((0,R.Z)().mark((function e(n){return(0,R.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:200==n.statusCode?(c(!1),x.refetch(),E.Am.success(n.message)):(c(!1),Array.isArray(n.message)?E.Am.error((0,f.jsx)("ul",{children:n.message.map((function(e){return(0,f.jsx)("li",{children:e},e)}))})):E.Am.error((0,f.jsx)("ul",{children:(0,f.jsx)("li",{children:n.message},n.message)})));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),onError:function(){var e=(0,U.Z)((0,R.Z)().mark((function e(n){return(0,R.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:E.Am.error(n.message);case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()});case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),pe=function(){var e=(0,U.Z)((0,R.Z)().mark((function e(n){return(0,R.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c(!0),m.mutate((0,A.Z)({id:S.id},n),{onSuccess:function(){var e=(0,U.Z)((0,R.Z)().mark((function e(n){return(0,R.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:200==n.statusCode?(c(!1),x.refetch(),E.Am.success(n.message),O({doUpdate:!1,data:"",id:null}),ee({doUpdate:!1,data:"",id:null})):(c(!1),Array.isArray(n.message)?E.Am.error((0,f.jsx)("ul",{children:n.message.map((function(e){return(0,f.jsx)("li",{children:e},e)}))})):E.Am.error((0,f.jsx)("ul",{children:(0,f.jsx)("li",{children:n.message},n.message)})));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),onError:function(){var e=(0,U.Z)((0,R.Z)().mark((function e(n){return(0,R.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:E.Am.error(n.message);case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()});case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,f.jsxs)(a.Z,{className:n.container,children:[(0,f.jsx)(a.Z,{children:(0,f.jsxs)("form",{onSubmit:S.doUpdate?re(pe):re(de),children:[(0,f.jsx)(N.Z,(0,A.Z)((0,A.Z)({label:"\u0639\u0646\u0648\u0627\u0646 \u06a9\u062a\u0627\u0628 ",variant:"outlined",className:n.formField,value:S.data},ie("title",{required:"\u0644\u0637\u0641\u0627 \u0646\u0627\u0645 \u06a9\u062a\u0627\u0628 \u0631\u0627 \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f"})),{},{onChange:function(e){S.doUpdate?O({doUpdate:!0,data:e.target.value,id:S.id}):O({doUpdate:!1,data:e.target.value,id:null})}})),(0,f.jsx)(N.Z,(0,A.Z)((0,A.Z)({label:"\u062a\u0648\u0636\u06cc\u062d\u0627\u062a  \u06a9\u062a\u0627\u0628",variant:"outlined",className:n.formField,value:Y.data},ie("description",{required:"\u0644\u0637\u0641\u0627 \u062a\u0648\u0636\u06cc\u062d\u0627\u062a \u06a9\u062a\u0627\u0628 \u0631\u0627 \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f"})),{},{inputRef:$,onChange:function(e){Y.doUpdate?ee({doUpdate:!0,data:e.target.value,id:S.id}):ee({doUpdate:!1,data:e.target.value,id:null})}})),(0,f.jsxs)(me.Z,{className:n.formField,fullWidth:!0,children:[(0,f.jsx)(he.Z,{id:"demo-simple-select-label",children:"\u0627\u0646\u062a\u062e\u0627\u0628 \u067e\u0627\u06cc\u0647"}),(0,f.jsx)(xe.Z,(0,A.Z)((0,A.Z)({value:null!==K&&void 0!==K?K:[]},ie("gradeLevels")),{},{inputRef:h,onChange:function(e){G(e.target.value)},multiple:!0,children:!(null!==Q&&void 0!==Q&&Q.isLoading)&&(null===Q||void 0===Q?void 0:Q.data.map((function(e){return(0,f.jsx)(ge.Z,{value:e._id,children:e.title},e._id)})))}))]}),(0,f.jsxs)(a.Z,{display:"flex",position:"relative",borderRadius:"100%",mb:3,children:[B||P?(0,f.jsx)(a.Z,{component:"img",src:null!==P&&void 0!==P?P:"",alt:"test flag",width:100,height:100}):(0,f.jsx)(a.Z,{component:"img",src:we,alt:"User flag",width:100,height:100}),(0,f.jsxs)(s.Z,{sx:{backgroundColor:"#FCF0FF",width:28,height:28,borderRadius:"8px",p:.5,position:"absolute",bottom:-10},onClick:function(){return J.current.click()},children:[(0,f.jsx)(te.fnU,{}),(0,f.jsx)("input",(0,A.Z)((0,A.Z)({},le),{},{type:"file",ref:function(e){ue(e),J.current=e},hidden:!0,onChange:function(e){J.current.files&&0!==J.current.files.length?H(J.current.files[0]):H(void 0),ce(e)}}))]})]}),(0,f.jsx)(d.Z,{variant:"contained",color:"primary",className:n.formButton,disabled:u,type:"submit",children:u?(0,f.jsx)(T.Z,{size:24}):S.doUpdate?"\u0648\u06cc\u0631\u0627\u06cc\u0634":"\u0630\u062e\u06cc\u0631\u0647"})]})}),(0,f.jsxs)(a.Z,{className:n.fieldOfStudy,children:[(0,f.jsx)(o.Z,{children:"\u0644\u06cc\u0633\u062a \u06a9\u062a\u0627\u0628\u200c\u0647\u0627"}),x.isLoading?(0,f.jsx)("div",{children:"\u062f\u0631 \u062d\u0627\u0644 \u0628\u0627\u0631\u06af\u06cc\u0631\u06cc..."}):(0,f.jsx)(oe,{secondary:!0,headers:[{children:"\u0639\u0646\u0648\u0627\u0646"},{children:"\u0639\u0645\u0644\u06cc\u0627\u062a"}],rows:null===x||void 0===x?void 0:x.data.map((function(e,n){return{id:e._id,data:{title:null===e||void 0===e?void 0:e.title,action:(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(s.Z,{onClick:function(){O({doUpdate:!0,data:e.title,id:e._id}),ee({doUpdate:!0,data:e.description,id:e._id}),G(e.gradeLevels),setTimeout((function(){h.current.focus()}),1110),setTimeout((function(){$.current.focus()}),1120),_(Ce.f.BASE+"/"+e.image)},children:(0,f.jsx)(te._3A,{width:12,height:12})}),(0,f.jsx)(s.Z,{children:(0,f.jsx)(se.q,{description:"\u0622\u06cc\u0627 \u0627\u0632 \u062d\u0630\u0641 \u06a9\u062a\u0627\u0628 \u0645\u0637\u0645\u0626\u0646  \u0647\u0633\u062a\u06cc\u062f\u061f",onConfirm:function(){return n=e._id,void g.mutate(n,{onSuccess:function(){var e=(0,U.Z)((0,R.Z)().mark((function e(n){return(0,R.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:200==n.statusCode?(c(!1),x.refetch(),E.Am.success(n.message)):(c(!1),E.Am.error(n.message));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()});var n},approved:"\u0628\u0644\u0647",denied:"\u062e\u06cc\u0631",children:(0,f.jsx)(te.TKD,{width:16,height:16})})})]})}}})),pagination:{page:j,count:1,rowsPerPage:w,onChange:function(e,n){b(n)},onRowsPerPageChange:function(){}}})]})]})},Re=(0,u.Z)((function(e){return{container:{margin:"32px 52px"}}})),Ue=function(){var e=Re();return(0,r.useEffect)((function(){window.scrollTo({top:0,left:0,behavior:"smooth"})}),[]),(0,f.jsx)(a.Z,{className:e.container,children:"\u0641\u0635\u0644"})},Ne=(0,u.Z)((function(e){return{container:{margin:"32px 52px"}}})),Te=function(){var e=Ne();return(0,r.useEffect)((function(){window.scrollTo({top:0,left:0,behavior:"smooth"})}),[]),(0,f.jsx)(a.Z,{className:e.container,children:"\u0645\u0648\u0636\u0648\u0639"})},Fe=function(){return(0,O.useMutation)((function(e){return I.T.gradeLevelControllerUpdate(e.id,(0,A.Z)((0,A.Z)({},e),{},{image:e.image[0]}))}))},Oe=function(){return(0,O.useMutation)((function(e){return I.T.gradeLevelControllerRemove(e)}))},Ie=function(){return(0,O.useMutation)((function(e){return I.T.gradeLevelControllerCreate((0,A.Z)({},e))}))},Le=["ref","onChange"],Ee=(0,u.Z)((function(e){return{container:{display:"flex",gap:"10px",justifyContent:"space-around"},fieldOfStudy:{margin:"0 50px"},formContainer:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"2rem",margin:"1rem",border:"1px solid ".concat(e.palette.primary.main),borderRadius:"5px",boxShadow:"0px 1px 2px ".concat(e.palette.primary.main)},formTitle:{marginBottom:"2rem",fontSize:"2rem",fontWeight:"bold",color:e.palette.primary.main},formField:{margin:"1rem 0",width:"100%"},formButton:{margin:"1rem",width:"100%"}}})),Pe=function(e){var n,t,i,u=Ee();(0,r.useEffect)((function(){window.scrollTo({top:0,left:0,behavior:"smooth"})}),[]);var c=(0,r.useState)(!1),p=(0,l.Z)(c,2),m=p[0],h=p[1],x=Ie(),g=Fe(),v=ye(),Z=Oe(),j=(0,r.useState)(1),b=(0,l.Z)(j,2),y=b[0],w=b[1],C=(0,r.useState)(10),k=(0,l.Z)(C,1)[0],S=(0,r.useState)({doUpdate:!1,data:"",id:null}),O=(0,l.Z)(S,2),I=O[0],L=O[1],_=(0,r.useRef)(null),M=(0,r.useState)(),q=(0,l.Z)(M,2),B=q[0],H=q[1],z=(0,r.useState)(),D=(0,l.Z)(z,2),K=D[0],G=D[1],Q=(0,r.useRef)(),J=(0,r.useRef)(),$=(0,r.useRef)(null),V=r.useState([]),X=(0,l.Z)(V,2),Y=X[0],ee=X[1],ne=P(),re=(0,r.useState)({doUpdate:!1,data:"",id:null}),ie=(0,l.Z)(re,2),ae=ie[0],ue=ie[1];(0,r.useEffect)((function(){if(K){var e=URL.createObjectURL(K);return H(e),function(){return URL.revokeObjectURL(e)}}H(void 0)}),[K]),(0,r.useEffect)((function(){ne.refetch()}),[]);var ce=(0,F.cI)(),le=ce.handleSubmit,de=ce.register,pe=ce.formState.errors,fe=ce.clearErrors,ve=de("image"),Ze=ve.ref,je=ve.onChange,be=(0,W.Z)(ve,Le);(0,r.useEffect)((function(){var e,n,t,r,i,a;E.Am.error(null===(e=pe.description)||void 0===e||null===(n=e.message)||void 0===n?void 0:n.toString()),E.Am.error(null===(t=pe.title)||void 0===t||null===(r=t.message)||void 0===r?void 0:r.toString()),E.Am.error(null===(i=pe.image)||void 0===i||null===(a=i.message)||void 0===a?void 0:a.toString()),fe()}),[null===(n=pe.description)||void 0===n?void 0:n.message,null===(t=pe.title)||void 0===t?void 0:t.message,null===(i=pe.image)||void 0===i?void 0:i.message]);var ke=function(){var e=(0,U.Z)((0,R.Z)().mark((function e(n){return(0,R.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h(!0),x.mutate((0,A.Z)((0,A.Z)({},n),{},{image:n.image[0]}),{onSuccess:function(){var e=(0,U.Z)((0,R.Z)().mark((function e(n){return(0,R.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:200==n.statusCode?(h(!1),v.refetch(),E.Am.success(n.message)):(h(!1),Array.isArray(n.message)?E.Am.error((0,f.jsx)("ul",{children:n.message.map((function(e){return(0,f.jsx)("li",{children:e},e)}))})):E.Am.error((0,f.jsx)("ul",{children:(0,f.jsx)("li",{children:n.message},n.message)})));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),onError:function(){var e=(0,U.Z)((0,R.Z)().mark((function e(n){return(0,R.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:E.Am.error(n.message);case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()});case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),Se=function(){var e=(0,U.Z)((0,R.Z)().mark((function e(n){return(0,R.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h(!0),g.mutate((0,A.Z)({id:I.id},n),{onSuccess:function(){var e=(0,U.Z)((0,R.Z)().mark((function e(n){return(0,R.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:200==n.statusCode?(h(!1),v.refetch(),E.Am.success(n.message),L({doUpdate:!1,data:"",id:null}),ue({doUpdate:!1,data:"",id:null}),ee(null)):(h(!1),Array.isArray(n.message)?E.Am.error((0,f.jsx)("ul",{children:n.message.map((function(e){return(0,f.jsx)("li",{children:e},e)}))})):E.Am.error((0,f.jsx)("ul",{children:(0,f.jsx)("li",{children:n.message},n.message)})));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),onError:function(){var e=(0,U.Z)((0,R.Z)().mark((function e(n){return(0,R.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:E.Am.error(n.message);case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()});case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),Ae=r.useState([]),Re=(0,l.Z)(Ae,2);Re[0],Re[1];return(0,f.jsxs)(a.Z,{className:u.container,children:[(0,f.jsx)(a.Z,{children:(0,f.jsxs)("form",{onSubmit:I.doUpdate?le(Se):le(ke),children:[(0,f.jsx)(N.Z,(0,A.Z)((0,A.Z)({label:"\u0639\u0646\u0648\u0627\u0646 \u067e\u0627\u06cc\u0647 \u062a\u062d\u0635\u06cc\u0644\u06cc",variant:"outlined",className:u.formField,value:I.data},de("title",{required:"\u0644\u0637\u0641\u0627 \u0646\u0627\u0645 \u067e\u0627\u06cc\u0647 \u062a\u062d\u0635\u06cc\u0644\u06cc \u0631\u0627 \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f"})),{},{inputRef:_,onChange:function(e){I.doUpdate?L({doUpdate:!0,data:e.target.value,id:I.id}):L({doUpdate:!1,data:e.target.value,id:null})}})),(0,f.jsx)(N.Z,(0,A.Z)((0,A.Z)({label:"\u062a\u0648\u0636\u06cc\u062d\u0627\u062a \u067e\u0627\u06cc\u0647 \u062a\u062d\u0635\u06cc\u0644\u06cc",variant:"outlined",className:u.formField,value:ae.data},de("description",{required:"\u0644\u0637\u0641\u0627 \u062a\u0648\u0636\u06cc\u062d\u0627\u062a \u067e\u0627\u06cc\u0647 \u062a\u062d\u0635\u06cc\u0644\u06cc \u0631\u0627 \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f"})),{},{inputRef:$,onChange:function(e){ae.doUpdate?ue({doUpdate:!0,data:e.target.value,id:I.id}):ue({doUpdate:!1,data:e.target.value,id:null})}})),(0,f.jsxs)(me.Z,{className:u.formField,fullWidth:!0,children:[(0,f.jsx)(he.Z,{id:"demo-simple-select-label",children:"\u0627\u0646\u062a\u062e\u0627\u0628 \u0631\u0634\u062a\u0647"}),(0,f.jsx)(xe.Z,(0,A.Z)((0,A.Z)({value:null!==Y&&void 0!==Y?Y:[]},de("fieldOfStudies")),{},{inputRef:J,onChange:function(e){ee(e.target.value)},multiple:!0,children:!(null!==ne&&void 0!==ne&&ne.isLoading)&&(null===ne||void 0===ne?void 0:ne.data.map((function(e){return(0,f.jsx)(ge.Z,{value:e._id,children:e.title},e._id)})))}))]}),(0,f.jsxs)(a.Z,{display:"flex",position:"relative",borderRadius:"100%",mb:3,children:[K||B?(0,f.jsx)(a.Z,{component:"img",src:null!==B&&void 0!==B?B:"",alt:"test flag",width:100,height:100}):(0,f.jsx)(a.Z,{component:"img",src:we,alt:"User flag",width:100,height:100}),(0,f.jsxs)(s.Z,{sx:{backgroundColor:"#FCF0FF",width:28,height:28,borderRadius:"8px",p:.5,position:"absolute",bottom:-10},onClick:function(){return Q.current.click()},children:[(0,f.jsx)(te.fnU,{}),(0,f.jsx)("input",(0,A.Z)((0,A.Z)({},be),{},{type:"file",ref:function(e){Ze(e),Q.current=e},hidden:!0,onChange:function(e){Q.current.files&&0!==Q.current.files.length?G(Q.current.files[0]):G(void 0),je(e)}}))]})]}),(0,f.jsx)(d.Z,{variant:"contained",color:"primary",className:u.formButton,disabled:m,type:"submit",children:m?(0,f.jsx)(T.Z,{size:24}):I.doUpdate?"\u0648\u06cc\u0631\u0627\u06cc\u0634":"\u0630\u062e\u06cc\u0631\u0647"})]})}),(0,f.jsxs)(a.Z,{className:u.fieldOfStudy,children:[(0,f.jsx)(o.Z,{children:"\u0644\u06cc\u0633\u062a \u067e\u0627\u06cc\u0647 \u0647\u0627\u06cc \u062a\u062d\u0635\u06cc\u0644\u06cc"}),v.isLoading?(0,f.jsx)("div",{children:"\u062f\u0631 \u062d\u0627\u0644 \u0628\u0627\u0631\u06af\u06cc\u0631\u06cc..."}):(0,f.jsx)(oe,{secondary:!0,headers:[{children:"\u0639\u0646\u0648\u0627\u0646"},{children:"\u0639\u0645\u0644\u06cc\u0627\u062a"}],rows:null===v||void 0===v?void 0:v.data.map((function(e,n){return{id:e._id,data:{title:null===e||void 0===e?void 0:e.title,action:(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(s.Z,{onClick:function(){L({doUpdate:!0,data:e.title,id:e._id}),ue({doUpdate:!0,data:e.description,id:e._id}),ee(e.fieldOfStudies),_.current.focus(),setTimeout((function(){$.current.focus()}),1e3),setTimeout((function(){J.current.focus()}),1110),H(Ce.f.BASE+"/"+e.image)},children:(0,f.jsx)(te._3A,{width:12,height:12})}),(0,f.jsx)(s.Z,{children:(0,f.jsx)(se.q,{description:"\u0622\u06cc\u0627 \u0627\u0632 \u062d\u0630\u0641 \u067e\u0627\u06cc\u0647 \u062a\u062d\u0635\u06cc\u0644\u06cc \u0645\u0637\u0645\u0626\u0646  \u0647\u0633\u062a\u06cc\u062f\u061f",onConfirm:function(){return n=e._id,void Z.mutate(n,{onSuccess:function(){var e=(0,U.Z)((0,R.Z)().mark((function e(n){return(0,R.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:200==n.statusCode?(h(!1),v.refetch(),E.Am.success(n.message)):(h(!1),E.Am.error(n.message));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()});var n},approved:"\u0628\u0644\u0647",denied:"\u062e\u06cc\u0631",children:(0,f.jsx)(te.TKD,{width:16,height:16})})})]})}}})),pagination:{page:y,count:1,rowsPerPage:k,onChange:function(e,n){w(n)},onRowsPerPageChange:function(){}}})]})]})},_e=function(){return(0,O.useMutation)((function(e){return I.T.termOfStudyControllerCreate((0,A.Z)({},e))}))},We=function(){return(0,O.useMutation)((function(e){return I.T.termOfStudyControllerUpdate(e.id,{title:e.title})}))},Me=function(){return(0,O.useMutation)((function(e){return I.T.termOfStudyControllerRemove(e)}))},qe=function(){return(0,O.useQuery)(["Get-All-Term-Of-Studies"],(0,U.Z)((0,R.Z)().mark((function e(){return(0,R.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.T.termOfStudyControllerFindAll();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))))},Be=(0,u.Z)((function(e){return{container:{display:"flex",gap:"10px",justifyContent:"space-around"},fieldOfStudy:{margin:"0 50px"},formContainer:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"2rem",margin:"1rem",border:"1px solid ".concat(e.palette.primary.main),borderRadius:"5px",boxShadow:"0px 1px 2px ".concat(e.palette.primary.main)},formTitle:{marginBottom:"2rem",fontSize:"2rem",fontWeight:"bold",color:e.palette.primary.main},formField:{margin:"1rem",width:"100%"},formButton:{margin:"1rem",width:"100%"}}})),He=function(e){var n=Be();(0,r.useEffect)((function(){window.scrollTo({top:0,left:0,behavior:"smooth"})}),[]);var t=(0,r.useState)(!1),i=(0,l.Z)(t,2),u=i[0],c=i[1],p=r.useState([]),m=(0,l.Z)(p,2),h=m[0],x=m[1],g=r.useState([]),v=(0,l.Z)(g,2),Z=v[0],j=v[1],b=_e(),y=We(),w=qe(),C=Me(),k=(0,r.useState)(1),S=(0,l.Z)(k,2),O=S[0],I=S[1],L=(0,r.useState)(10),P=(0,l.Z)(L,1)[0],_=(0,r.useState)({doUpdate:!1,data:"",id:null}),W=(0,l.Z)(_,2),M=W[0],q=W[1],B=je(),H=ye(),z=(0,F.cI)(),D=z.handleSubmit,K=z.register,G=(z.formState.errors,(0,r.useRef)()),Q=(0,r.useRef)(),J=function(){var e=(0,U.Z)((0,R.Z)().mark((function e(n){return(0,R.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c(!0),b.mutate(n,{onSuccess:function(){var e=(0,U.Z)((0,R.Z)().mark((function e(n){return(0,R.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:200==n.statusCode?(c(!1),w.refetch(),E.Am.success(n.message)):(c(!1),Array.isArray(n.message)?E.Am.error((0,f.jsx)("ul",{children:n.message.map((function(e){return(0,f.jsx)("li",{children:e},e)}))})):E.Am.error((0,f.jsx)("ul",{children:(0,f.jsx)("li",{children:n.message},n.message)})));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),onError:function(){var e=(0,U.Z)((0,R.Z)().mark((function e(n){return(0,R.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:E.Am.error(n.message);case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()});case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),$=function(){var e=(0,U.Z)((0,R.Z)().mark((function e(n){return(0,R.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c(!0),y.mutate({id:M.id,title:M.data},{onSuccess:function(){var e=(0,U.Z)((0,R.Z)().mark((function e(n){return(0,R.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:200==n.statusCode?(c(!1),w.refetch(),E.Am.success(n.message),q({doUpdate:!1,data:"",id:null})):(c(!1),Array.isArray(n.message)?E.Am.error((0,f.jsx)("ul",{children:n.message.map((function(e){return(0,f.jsx)("li",{children:e},e)}))})):E.Am.error((0,f.jsx)("ul",{children:(0,f.jsx)("li",{children:n.message},n.message)})));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),onError:function(){var e=(0,U.Z)((0,R.Z)().mark((function e(n){return(0,R.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:E.Am.error(n.message);case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()});case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,f.jsxs)(a.Z,{className:n.container,children:[(0,f.jsx)(a.Z,{children:(0,f.jsxs)("form",{onSubmit:M.doUpdate?D($):D(J),children:[(0,f.jsx)(N.Z,(0,A.Z)((0,A.Z)({label:"\u0639\u0646\u0648\u0627\u0646 \u062a\u0631\u0645 \u062a\u062d\u0635\u06cc\u0644\u06cc",variant:"outlined",className:n.formField,value:M.data},K("title",{required:"\u0644\u0637\u0641\u0627 \u0646\u0627\u0645 \u062a\u0631\u0645 \u062a\u062d\u0635\u06cc\u0644\u06cc \u0631\u0627 \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f"})),{},{onChange:function(e){M.doUpdate?q({doUpdate:!0,data:e.target.value,id:M.id}):q({doUpdate:!1,data:e.target.value,id:null})}})),(0,f.jsxs)(me.Z,{className:n.formField,fullWidth:!0,children:[(0,f.jsx)(he.Z,{id:"demo-simple-select-label",children:"\u0627\u0646\u062a\u062e\u0627\u0628 \u067e\u0627\u06cc\u0647"}),(0,f.jsx)(xe.Z,(0,A.Z)((0,A.Z)({value:null!==h&&void 0!==h?h:[]},K("gradeLevels")),{},{inputRef:G,onChange:function(e){x(e.target.value)},multiple:!0,children:!(null!==H&&void 0!==H&&H.isLoading)&&(null===H||void 0===H?void 0:H.data.map((function(e){return(0,f.jsx)(ge.Z,{value:e._id,children:e.title},e._id)})))}))]}),(0,f.jsxs)(me.Z,{className:n.formField,fullWidth:!0,children:[(0,f.jsx)(he.Z,{id:"demo-simple-select-label",children:"\u0627\u0646\u062a\u062e\u0627\u0628 \u06a9\u062a\u0627\u0628"}),(0,f.jsx)(xe.Z,(0,A.Z)((0,A.Z)({value:null!==Z&&void 0!==Z?Z:[]},K("books")),{},{inputRef:Q,onChange:function(e){j(e.target.value)},multiple:!0,children:!(null!==B&&void 0!==B&&B.isLoading)&&(null===B||void 0===B?void 0:B.data.map((function(e){return(0,f.jsx)(ge.Z,{value:e._id,children:e.title},e._id)})))}))]}),(0,f.jsx)(d.Z,{variant:"contained",color:"primary",className:n.formButton,disabled:u,type:"submit",children:u?(0,f.jsx)(T.Z,{size:24}):M.doUpdate?"\u0648\u06cc\u0631\u0627\u06cc\u0634":"\u0630\u062e\u06cc\u0631\u0647"})]})}),(0,f.jsxs)(a.Z,{className:n.fieldOfStudy,children:[(0,f.jsx)(o.Z,{children:"\u0644\u06cc\u0633\u062a \u062a\u0631\u0645 \u0647\u0627\u06cc \u062a\u062d\u0635\u06cc\u0644\u06cc"}),w.isLoading?(0,f.jsx)("div",{children:"\u062f\u0631 \u062d\u0627\u0644 \u0628\u0627\u0631\u06af\u06cc\u0631\u06cc..."}):(0,f.jsx)(oe,{secondary:!0,headers:[{children:"\u0639\u0646\u0648\u0627\u0646"},{children:"\u0639\u0645\u0644\u06cc\u0627\u062a"}],rows:null===w||void 0===w?void 0:w.data.map((function(e,n){return{id:e._id,data:{title:null===e||void 0===e?void 0:e.title,action:(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(s.Z,{onClick:function(){q({doUpdate:!0,data:e.title,id:e._id}),x(e.gradeLevels),setTimeout((function(){G.current.focus()}),1110)},children:(0,f.jsx)(te._3A,{width:12,height:12})}),(0,f.jsx)(s.Z,{children:(0,f.jsx)(se.q,{description:"\u0622\u06cc\u0627 \u0627\u0632 \u062d\u0630\u0641 \u062a\u0631\u0645 \u062a\u062d\u0635\u06cc\u0644\u06cc \u0645\u0637\u0645\u0626\u0646  \u0647\u0633\u062a\u06cc\u062f\u061f",onConfirm:function(){return n=e._id,void C.mutate(n,{onSuccess:function(){var e=(0,U.Z)((0,R.Z)().mark((function e(n){return(0,R.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:200==n.statusCode?(c(!1),w.refetch(),E.Am.success(n.message)):(c(!1),E.Am.error(n.message));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()});var n},approved:"\u0628\u0644\u0647",denied:"\u062e\u06cc\u0631",children:(0,f.jsx)(te.TKD,{width:16,height:16})})})]})}}})),pagination:{page:O,count:1,rowsPerPage:P,onChange:function(e,n){I(n)},onRowsPerPageChange:function(){}}})]})]})},ze=function(){var e=(0,S.v9)((function(e){return e.user}));return(0,f.jsxs)(i.Z5,{children:[(0,f.jsx)(i.AW,{path:"/field-of-study",element:(0,f.jsx)(k,{userRole:null===e||void 0===e?void 0:e.user,route:{requiredRoles:["SuperAdmin"],resource:"post",action:"create"},children:(0,f.jsx)(de,{})})}),(0,f.jsx)(i.AW,{path:"/grade-level",element:(0,f.jsx)(k,{userRole:null===e||void 0===e?void 0:e.user,route:{requiredRoles:["SuperAdmin"],resource:"post",action:"create"},children:(0,f.jsx)(Pe,{})})}),(0,f.jsx)(i.AW,{path:"/book",element:(0,f.jsx)(k,{userRole:null===e||void 0===e?void 0:e.user,route:{requiredRoles:["SuperAdmin"],resource:"post",action:"create"},children:(0,f.jsx)(Ae,{})})}),(0,f.jsx)(i.AW,{path:"/term-of-study",element:(0,f.jsx)(k,{userRole:null===e||void 0===e?void 0:e.user,route:{requiredRoles:["SuperAdmin"],resource:"post",action:"create"},children:(0,f.jsx)(He,{})})}),(0,f.jsx)(i.AW,{path:"/chapter",element:(0,f.jsx)(k,{userRole:null===e||void 0===e?void 0:e.user,route:{requiredRoles:["SuperAdmin"],resource:"post",action:"create"},children:(0,f.jsx)(Ue,{})})}),(0,f.jsx)(i.AW,{path:"/subject",element:(0,f.jsx)(k,{userRole:null===e||void 0===e?void 0:e.user,route:{requiredRoles:["SuperAdmin"],resource:"post",action:"create"},children:(0,f.jsx)(Te,{})})}),(0,f.jsx)(i.AW,{path:"/",element:(0,f.jsx)(k,{userRole:null===e||void 0===e?void 0:e.user,route:{requiredRoles:["SuperAdmin"],resource:"post",action:"create"},children:(0,f.jsx)(fe,{})})})]})},De=t(1688),Ke=(0,u.Z)((function(e){return{container:{margin:"32px 52px"},contentWrapper:{float:"right"},content:{margin:"16px 0",padding:"2px 0",float:"right"},menu:{margin:"0 0 0 150px ",width:"200px",float:"right"},button:{color:e.palette.text.primary},badge:{backgroundColor:e.palette.primary.main,color:e.palette.common.white,padding:"5px"}}})),Ge=function(){var e,n,t,u=(0,De.H)((function(e){return e}));(0,r.useEffect)((function(){window.scrollTo({top:0,left:0,behavior:"smooth"})}),[]);var c=Ke(),l=(0,i.s0)();return(0,f.jsxs)(a.Z,{className:c.container,children:[(0,f.jsxs)(a.Z,{display:"flex",justifyContent:"space-around",children:[(0,f.jsxs)(a.Z,{display:"flex",gap:"10px",children:[(0,f.jsx)(o.Z,{variant:"h5",children:null===u||void 0===u||null===(e=u.user)||void 0===e?void 0:e.username}),null===u||void 0===u||null===(n=u.user)||void 0===n||null===(t=n.roles)||void 0===t?void 0:t.map((function(e){return(0,f.jsx)(a.Z,{className:c.badge,children:(0,f.jsx)(o.Z,{variant:"body2",children:"User"===e.title?"\u06a9\u0627\u0631\u0628\u0631 \u0639\u0627\u062f\u06cc":"\u0645\u062f\u06cc\u0631 \u06a9\u0644"})},e.title)}))]}),(0,f.jsx)(a.Z,{children:(0,f.jsx)(s.Z,{className:c.button,onClick:function(){localStorage.removeItem("auth-storage"),u.setUser(null),l("/")},children:(0,f.jsx)(y.Z,{})})})]}),(0,f.jsxs)(a.Z,{className:c.contentWrapper,children:[(0,f.jsx)(a.Z,{className:c.menu,children:(0,f.jsx)(v,{items:b})}),(0,f.jsx)(a.Z,{className:c.content,children:(0,f.jsx)(ze,{})})]})]})},Qe=[{title:"\u062e\u0627\u0646\u0647",to:"/",startIcon:(0,f.jsx)(Z.Z,{})},{title:"\u062f\u0627\u0634\u0628\u0648\u0631\u062f",to:"/pv/karanbala/dashboard",startIcon:(0,f.jsx)(j.Z,{})},{category:{children:[{title:"\u067e\u0631\u0648\u0641\u0627\u06cc\u0644"}]}}],Je=(0,u.Z)((function(e){return{container:{margin:"32px 52px"}}})),$e=function(){var e=Je();return(0,r.useEffect)((function(){window.scrollTo({top:0,left:0,behavior:"smooth"})}),[]),(0,f.jsx)(a.Z,{className:e.container,children:"\u062f\u0627\u0634\u0628\u0648\u0631\u062f"})},Ve=function(){var e=(0,S.v9)((function(e){return e.user}));return(0,f.jsx)(i.Z5,{children:(0,f.jsx)(i.AW,{path:"/",element:(0,f.jsx)(k,{userRole:null===e||void 0===e?void 0:e.user,route:{requiredRoles:["User"],resource:"profile",action:"read"},children:(0,f.jsx)($e,{})})})})},Xe=(0,u.Z)((function(e){return{container:{margin:"32px 52px"},contentWrapper:{},content:{margin:"16px 0",padding:"2px 0",float:"right"},menu:{margin:"0 0 0 150px ",width:"200px",float:"right"},button:{color:e.palette.text.primary},badge:{backgroundColor:e.palette.primary.main,color:e.palette.common.white,padding:"5px"}}})),Ye=function(){var e,n,t,u=(0,De.H)((function(e){return e}));(0,r.useEffect)((function(){window.scrollTo({top:0,left:0,behavior:"smooth"})}),[]);var c=Xe(),l=(0,i.s0)();return(0,f.jsxs)(a.Z,{className:c.container,children:[(0,f.jsxs)(a.Z,{display:"flex",justifyContent:"space-around",children:[(0,f.jsxs)(a.Z,{display:"flex",gap:"10px",children:[(0,f.jsx)(o.Z,{variant:"h5",children:null===u||void 0===u||null===(e=u.user)||void 0===e?void 0:e.username}),null===u||void 0===u||null===(n=u.user)||void 0===n||null===(t=n.roles)||void 0===t?void 0:t.map((function(e){return(0,f.jsx)(a.Z,{className:c.badge,children:(0,f.jsx)(o.Z,{variant:"body2",children:"User"===e.title?"\u06a9\u0627\u0631\u0628\u0631 \u0639\u0627\u062f\u06cc":"\u0645\u062f\u06cc\u0631 \u06a9\u0644"})},e.title)}))]}),(0,f.jsx)(a.Z,{children:(0,f.jsx)(s.Z,{className:c.button,onClick:function(){l("/")},children:(0,f.jsx)(y.Z,{})})})]}),(0,f.jsxs)(a.Z,{className:c.contentWrapper,children:[(0,f.jsx)(a.Z,{className:c.menu,children:(0,f.jsx)(v,{items:Qe})}),(0,f.jsx)(a.Z,{className:c.content,children:(0,f.jsx)(Ve,{})})]})]})},en=t(5200),nn=function(e){var n=e.children,t=(0,De.M)((function(e){return e})).accessToken,i=(0,De.H)((function(e){return e}));return(0,r.useEffect)((function(){if(t&&null===i.user){var e=(0,en.Z)(null!==t&&void 0!==t?t:"");Ce.f.TOKEN=t,i.setUser(e)}else Ce.f.TOKEN=t}),[t,i]),(0,f.jsx)(f.Fragment,{children:n})},tn=function(){var e=(0,De.H)((function(e){return e}));return(0,f.jsx)(nn,{children:(0,f.jsxs)(i.Z5,{children:[(0,f.jsx)(i.AW,{path:"/karanbala/dashboard/*",element:(0,f.jsx)(k,{userRole:null===e||void 0===e?void 0:e.user,route:{requiredRoles:["User"],resource:"profile",action:"read"},children:(0,f.jsx)(Ye,{})})}),(0,f.jsx)(i.AW,{path:"/karanbala/admin/*",element:(0,f.jsx)(k,{userRole:null===e||void 0===e?void 0:e.user,route:{requiredRoles:["SuperAdmin"],resource:"post",action:"create"},children:(0,f.jsx)(Ge,{})})})]})})}}}]);